<!-- ** START template/system/admin.html 19.01.2018 19:20:03 ************************************************************************************ -->
<TMPL_IF WIZARD_SKIPADMIN>
	<center>
	<TMPL_VAR WIZARD.ADMIN_MSG_SKIPPED>
	<form method="post" data-ajax="false" name="main_form1" id="main_form1" action="<TMPL_VAR SELFURL>">
		<a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/index.cgi?lang=<TMPL_VAR LANG>"><TMPL_VAR COMMON.BUTTON_CANCEL></a>
		<INPUT type="hidden" name="currentstep" id="currentstep" value="<TMPL_VAR STEP>">
		<INPUT type="hidden" name="sid" id="sid" value="<TMPL_VAR SID>">
<!--		
		<button type="submit" form="main_form1" id="btnback" name="btnback" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-l"><TMPL_VAR WIZARD.BUTTON_PREV_STEP>&nbsp;<TMPL_VAR PREVSTEPNR></button> 
-->
		<button type="submit" form="main_form1" id="btnsubmit" name="btnsubmit" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r"><TMPL_VAR WIZARD.BUTTON_NEXT_STEP>&nbsp;<TMPL_VAR NEXTSTEPNR></button>
	</form>
	</center>
</TMPL_IF>

<TMPL_IF FORM>
	<form method="post" data-ajax="false" name="main_form1" id="main_form1" action="<TMPL_VAR SELFURL>">
	<input type="hidden" name="saveformdata" value="1">
	<input type="hidden" name="adminuserold" value="<TMPL_VAR ADMINUSEROLD>">
	<table class="formtable" border="0" width="100%">
		<tr>
			<td colspan="4">
				<TMPL_IF WIZARD>
					<p><TMPL_VAR WIZARD.ADMIN_LABEL_INTRO></p>
					<p style="color:red"><TMPL_VAR ERROR></p>
				<TMPL_ELSE>
					<p><TMPL_VAR ADMIN.LABEL_INTRO></p>
				</TMPL_IF>
			</td>
		</tr>
		<tr>
			<td width="15%">
				<label class="control-label" for="adminuser"><TMPL_VAR ADMIN.LABEL_USERNAME></label>
			</td>
			<td width="40%">
				<input value='<TMPL_VAR ADMINUSEROLD>' id='adminuser' name='adminuser' type='text' data-validation-error-msg="<TMPL_VAR ADMIN.MSG_VAL_USERNAME_ERROR>" data-validation-rule="^([A-Za-z0-9]|_-){3,20}$">
			</td>
			<td width="3%">
				&nbsp;
			</td>
			<td width="32%" class="hint">
				<TMPL_VAR ADMIN.HINT_USERNAME_ALLOWED_CHARS>
			</td>
		</tr>
		<tr>
			<td colspan="4">
				<hr>
			</td>
		</tr>
		<tr>
			<td>
				<label for="adminpass1"><TMPL_VAR ADMIN.LABEL_NEW_PASSWORD></label>
			</td>
			<td>
				<input id='adminpass1' name='adminpass1' autocomplete="off" type='password' data-validation-error-msg="<TMPL_VAR ADMIN.MSG_VAL_PASSWORD_ERROR>" data-validation-rule="^(?=loxberry$)|^(((?=.*[a-zA-Z0-9\-\_\,\.\;\:\!\?\&\(\)\?\+\%\=])(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z])[a-zA-Z0-9\-\_\,\.\;\:\!\?\&\(\)\?\+\%\=]{4,64}$)|^(){0})$">
			</td>
			<td>
				&nbsp;
			</td>
			<td class="hint">
				<TMPL_VAR ADMIN.HINT_PASSWORD_ALLOWED_CHARS>
			</td>
		</tr>
		<tr>
			<td>
				<label for="adminpass2"><TMPL_VAR ADMIN.LABEL_RETYPE_PASSWORD></label>
			</td>
			<td>
				<input id='adminpass2' name='adminpass2' autocomplete="off" type='password' data-validation-error-msg="<TMPL_VAR ADMIN.MSG_VAL_PASSWORD_DIFFERENT>" data-validation-rule="special:compare-with:#adminpass1">
			</td>
			<td>
				&nbsp;
			</td>
			<td class="hint">
				<TMPL_VAR ADMIN.HINT_PASSWORD_RETYPE>
			</td>
		</tr>
		<tr>
			<td colspan="4">
				<hr>
			</td>
		</tr>
	<TMPL_IF WIZARD>
		<!-- fields removed for wizard -->
	<TMPL_ELSE>
		<tr>
			<td>
				<label for="securepin1"><TMPL_VAR ADMIN.LABEL_NEW_SECUREPIN></label>
			</td>
			<td>
				<input id='securepin1' name='securepin1' autocomplete="off" type='password' data-validation-error-msg="<TMPL_VAR ADMIN.MSG_VAL_SECUREPIN_ERROR>" data-validation-rule="^((([A-Za-z0-9]){4,10})|(){0})$">
			</td>
			<td>
				&nbsp;
			</td>
			<td class="hint">
				<TMPL_VAR ADMIN.HINT_SECUREPIN_ALLOWED_CHARS>
			</td>
		</tr>
		<tr>
			<td>
				<label for="adminpass2"><TMPL_VAR ADMIN.LABEL_RETYPE_SECUREPIN></label>
			</td>
			<td>
				<input id='securepin2' name='securepin2' autocomplete="off" type='password' data-validation-error-msg="<TMPL_VAR ADMIN.MSG_VAL_SECUREPIN_DIFFERENT>" data-validation-rule="special:compare-with:#securepin1">
			</td>
			<td>
				&nbsp;
			</td>
			<td class="hint">
				<TMPL_VAR ADMIN.HINT_SECUREPIN_RETYPE>
			</td>
		</tr>
		<tr>
			<td colspan="4">
				<hr>
			</td>
		</tr>
		<tr>
			<td colspan="4">
				<p><TMPL_VAR ADMIN.LABEL_SECURITY_HINT></p>
			</td>
		</tr>
		<tr>
			<td>
			 <label for="adminpassold"><TMPL_VAR ADMIN.LABEL_CURRENT_PASSWORD></label>
			</td>
			<td>
				<input id='adminpassold' name='adminpassold' type='password' data-validation-coloring="off" data-validation-error-msg="<TMPL_VAR ADMIN.SAVE_ERR_EMPTY_PASS>" data-validation-rule="^(.){1,64}$">
			</td>
			<td>
			</td>
			<td>
			</td>
		</tr>
		<tr>
			<td>
				<label for="securepinold"><TMPL_VAR ADMIN.LABEL_SECUREPINOLD></label>
			</td>
			<td>
				<input  id='securepinold' name='securepinold' type='password' data-validation-coloring="off" data-validation-error-msg="<TMPL_VAR ADMIN.SAVE_ERR_EMPTY_SECUREPIN>" data-validation-rule="^([A-Za-z0-9]){4,10}$">
			</td>
			<td>
			</td>
			<td>
			</td>
		</tr>
	</TMPL_IF>
	</table>
	<p>
		<center>
			<table class="formtable" border="0">
				<tr>
					<TMPL_IF WIZARD>
					<!-- Buttons for wizard -->
					<td>
						
						<a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/index.cgi?lang=<TMPL_VAR LANG>"><TMPL_VAR COMMON.BUTTON_CANCEL></a>
						<INPUT type="hidden" name="currentstep" id="currentstep" value="<TMPL_VAR STEP>">
						<INPUT type="hidden" name="sid" id="sid" value="<TMPL_VAR SID>">
<!--						
						<button type="submit" form="main_form1" id="btnback" name="btnback" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-l"><TMPL_VAR WIZARD.BUTTON_PREV_STEP>&nbsp;<TMPL_VAR PREVSTEPNR></button>
-->					
						<button type="submit" form="main_form1" id="btnsubmit" name="btnsubmit" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r"><TMPL_VAR WIZARD.BUTTON_NEXT_STEP>&nbsp;<TMPL_VAR NEXTSTEPNR></button>
					</td>
					<TMPL_ELSE>
					<!-- Buttons for widget -->
					<td>
						<a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/system/index.cgi?form=system"><TMPL_VAR COMMON.BUTTON_CANCEL></a>
					</td>
					<td>
						<button type="submit" form="main_form1" id="btnsubmit" data-role="button" data-inline="true" data-mini="true" data-icon="check"><TMPL_VAR COMMON.BUTTON_SAVE></button>
					</td>
					</TMPL_IF>
				</tr>
			</table>
		</center>
	</p>
</form>
<script>
$( document ).ready(function()
{
	validate_enable('#adminuser');
	validate_enable('#adminpass1');
	$("#adminpass1").on('keyup', function(e) { validate_chk_value( "#adminpass2","keyup","special:compare-with:#adminpass1"); });
	validate_enable('#adminpass2');
	validate_enable('#securepin1');
	$("#securepin1").on('keyup', function(e) { validate_chk_value( "#securepin2","keyup","special:compare-with:#securepin1"); });
	validate_enable('#securepin2');
	validate_enable('#adminpassold');
	$( '#adminpassold' ).css("background-color","#FFFFC0").attr("original-background-color","#FFFFC0"); 
	validate_enable('#securepinold');
	validate_chk_object(['#adminuser','#adminpass1','#adminpass2','#securepin1','#securepin2','#securepinold','#adminpassold']);
	$( '#securepinold' ).css("background-color","#FFFFC0").attr("original-background-color","#FFFFC0");
});
</script>
</TMPL_IF>

<TMPL_IF SAVE>
	<p><TMPL_VAR ADMIN.SAVE_OK_INFO></p>
	<table border=0 cellpadding=10>
		<tr>
			<td>
				<b><TMPL_VAR ADMIN.SAVE_OK_WEB_ADMIN_AREA></b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_USER> <b><TMPL_VAR ADMINUSER></b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_PASSWORD> <b><TMPL_VAR ADMINPASS></b>
			</td>
		</tr>
		<tr>
			<td>
				<b><TMPL_VAR ADMIN.SAVE_OK_COL_SSH></b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_USER> <b>loxberry</b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_PASSWORD> <b><TMPL_VAR ADMINPASS></b>
			</td>
		</tr>
		<!--<tr>
			<td>
				<b><TMPL_VAR ADMIN.SAVE_OK_COL_MYSQL></b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_USER> <b>root</b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_PASSWORD> <b><TMPL_VAR ADMINPASS></b>
			</td>
		</tr>-->
		<tr>
			<td>
				<b><TMPL_VAR ADMIN.SAVE_OK_COL_SECUREPIN></b>
			</td>
			<td>
				<b><TMPL_VAR SECUREPIN></b>
			</td>
			<td>
				&nbsp;
			</td>
		</tr>
		<TMPL_IF WIZARD>
		<tr>
			<td>
				<b><TMPL_VAR ADMIN.SAVE_OK_ROOT_USER></b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_USER> <b>root</b>
			</td>
			<td>
				<TMPL_VAR ADMIN.SAVE_OK_COL_PASSWORD> <b><TMPL_VAR ROOTPASS></b>
			</td>
		</tr>
		</TMPL_IF>
	<TMPL_IF ERRORS>
						<TMPL_VAR ADMIN.SAVE_ERR_GENERAL>
						<p style="color:red;"><TMPL_VAR ERRORS></p>
	</TMPL_IF>

		<tr>
			<td colspan="3">
				<p style="color:red"><b><TMPL_VAR ADMIN.SAVE_OK_HINT_RED></b></p>
				<a download="credentials.txt" title="credentials.txt" data-role="button" data-mini="true" data-icon="arrow-r" href="data:text/plain;charset=utf-8;base64,<TMPL_VAR CREDENTIALSTXT>"><TMPL_VAR ADMIN.BUTTON_SAVE_OK_DOWNLOAD_CREDENTIALS></a>
			</td>
		</tr>
	</table>
	<center>
		<table border=0>
			<tr>
				<td align="center">
					<TMPL_IF WIZARD>
						<form method="post" data-ajax="false" name="main_form1" id="main_form1" action="<TMPL_VAR SELFURL>">
						<a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/index.cgi?lang=<TMPL_VAR LANG>"><TMPL_VAR COMMON.BUTTON_CANCEL></a>
						<INPUT type="hidden" name="currentstep" id="currentstep" value="<TMPL_VAR STEP>">
						<INPUT type="hidden" name="sid" id="sid" value="<TMPL_VAR SID>">
<!--						
						<button type="submit" form="main_form1" id="btnback" name="btnback" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-l"><TMPL_VAR WIZARD.BUTTON_PREV_STEP>&nbsp;<TMPL_VAR PREVSTEPNR></button>
-->						
						<button type="submit" form="main_form1" id="btnsubmit" name="btnsubmit" value="1" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r"><TMPL_VAR WIZARD.BUTTON_NEXT_STEP>&nbsp;<TMPL_VAR NEXTSTEPNR></button>
						</form>
					<TMPL_ELSE>
					<p>
						<a id="btnok" data-role="button" data-inline="true" data-mini="true" data-icon="check" href="<TMPL_VAR NEXTURL>"><TMPL_VAR COMMON.BUTTON_OK></a>
					</p>
					</TMPL_IF>
				</td>
			</tr>
		</table>
	</center>
</TMPL_IF>
<!-- ** END template/system/admin.html ************************************************************************************ -->
